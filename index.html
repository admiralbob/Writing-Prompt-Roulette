<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Writing Prompt Roulette</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    
    <style>
        body { background: #121212; color: white; font-family: 'Segoe UI', sans-serif; text-align: center; padding: 10px; }
        h1 { color: #ff4757; margin-top: 20px; font-size: 1.8rem; }
        p.subtitle { color: #95a5a6; margin-bottom: 20px; }
        
        /* The 4-Column Layout */
        .container { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin: 20px 0; }
        .column { display: flex; flex-direction: column; align-items: center; width: 220px; }
        
        .wheel {
            width: 100%; height: 180px; background: #1e1e1e; border: 2px solid #444;
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            padding: 15px; font-weight: bold; font-size: 0.95rem; line-height: 1.3;
            box-shadow: 0 8px 15px rgba(0,0,0,0.5); box-sizing: border-box;
            overflow: hidden;
        }
        
        .label { color: #ff4757; text-transform: uppercase; font-size: 10px; margin-bottom: 8px; letter-spacing: 1.5px; font-weight: bold; }
        
        .button-group { display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 10px; }
        
        button {
            padding: 15px 40px; font-size: 1.1rem; cursor: pointer; border-radius: 50px; border: none;
            background: #ff4757; color: white; font-weight: bold; width: 280px; transition: 0.2s;
        }
        button:hover { background: #ff6b81; transform: scale(1.02); }
        
        /* The Copy Button starts hidden */
        #copy-btn { display: none; background: #2f3542; font-size: 0.9rem; }
        
        .spinning { border-color: #ff4757; animation: shake 0.1s infinite; }
        @keyframes shake { 0% { transform: translateY(-1px); } 100% { transform: translateY(1px); } }
        
        /* History Section Styles */
        #history-section {
            margin: 40px auto; padding: 20px; background: #16213e;
            border-radius: 15px; width: 90%; max-width: 900px; text-align: left;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
        }
        .history-item {
            border-bottom: 1px solid #1a1a2e; padding: 12px 0;
            font-size: 0.85rem; color: #bdc3c7; line-height: 1.4;
        }
        .history-item:last-child { border-bottom: none; }
        .history-tag { color: #ff4757; font-weight: bold; margin-right: 8px; font-size: 0.75rem; }
    </style>
</head>
<body>

    <h1>Writing Roulette</h1>
    <p class="subtitle">Spin for a new interstellar odyssey.</p>

    <div class="container">
        <div class="column">
            <div class="label">Scenario</div>
            <div id="scen" class="wheel">?</div>
        </div>
        <div class="column">
            <div class="label">Genre</div>
            <div id="gen" class="wheel">?</div>
        </div>
        <div class="column">
            <div class="label">Character</div>
            <div id="char" class="wheel">?</div>
        </div>
        <div class="column">
            <div class="label">Wildcard</div>
            <div id="wild" class="wheel">?</div>
        </div>
    </div>

    <div class="button-group">
        <button onclick="spin()">SPIN THE WHEELS</button>
        <button id="copy-btn" onclick="copyToClipboard()">COPY TO CLIPBOARD</button>
    </div>

    <div id="history-section">
        <div class="label" style="text-align: left; margin-bottom: 15px;">Spin History</div>
        <div id="history-list">
            <p style="font-size: 0.8rem; color: #57606f;">No spins recorded yet.</p>
        </div>
    </div>

    <script>
        // --- 1. PROMPT LISTS ---
        const scenarios = [
            "An object that feels genuine empathy for its owner.",
            "A character discovers a door in their house that wasn't there yesterday.",
            "A celebration is interrupted by a broadcast that changes the laws of physics.",
            "A character is legally required to spend 24 hours with their childhood self.",
            "Two characters find a suitcase of money covered in a substance that glows in the dark.",
            "An ancient artifact is found at a construction site, and it is still plugged in.",
            "A character must clean out the apartment of a relative they never knew existed.",
            "A 100-year-old time capsule is opened, containing a photo of a current group member.",
            "A character's reflection in the mirror lags behind or jumps ahead by three seconds.",
            "A character receives a phone call from their own phone number."
        ];

        const genres = [
            "Contemporary Drama: Grounded stories about real people and modern life.",
            "High Fantasy: Epic tales featuring magic or mythical worlds.",
            "Cosy Mystery: A gentle puzzle focused on community and secrets.",
            "Speculative Fiction: Stories about tech or social shifts.",
            "Gothic Horror: Atmospheric stories of dread and haunting secrets.",
            "Satire/Comedy: Witty or exaggerated looks at society and norms.",
            "Action/Adventure: Fast-paced stories of journeys and peril.",
            "Romance: Stories centered on the growth of a relationship."
        ];

        const characters = [
            "The Professional: Must finish a job while being constantly interrupted.",
            "The Messenger: Must deliver a piece of news that will change everything.",
            "The Neighbor: Must ask for a favor from someone theyâ€™ve been avoiding.",
            "The Outcast: Must convince a group of strangers to trust them.",
            "The Saboteur: Secretly trying to make a project fail for a 'noble' reason.",
            "The Tourist: In the wrong place at the wrong time, trying to make the best of it.",
            "The Whistleblower: Has proof of a minor corruption that will ruin a good person's life.",
            "The Perfectionist: Must complete a high-stakes task with 'imperfect' tools.",
            "The Prodigy: Naturally gifted but has lost all passion for their craft.",
            "The Mediator: Must resolve a conflict where both sides are technically right.",
            "The Imposter: Has successfully faked their way into a high-level position.",
        ];

        const wildcards = [
            "The Sensory Ban: Character is blind; no visual descriptions allowed.",
            "The Silent Emotion: The character is overwhelmed by an emotion, but that emotion (and its synonyms) can never be named.",
            "The Adverb Fast: No words ending in -ly allowed.",
            "The Monosyllabic Challenge: 50% of sentences must be single-syllable words only.",
            "The Static Camera: Characters cannot move their feet during the scene.",
            "The No-Dialogue Rule: No spoken words allowed.",
            "The Unreliable Filter: Narrator must lie about one physical fact in the room.",
            "The Soundscape: Every paragraph must start with a sound description.",
            "The Unwelcome Guest: In the middle of the scene, a character who definitely shouldn't be there walks in.",
            "The Tick-Tock: Something in the room is going to explode, break, or expire in exactly five minutes.",
            "The Truth Serum: One character is physically incapable of lying.",
            "The Power Outage: The lights go out (or the magic fades, or the tech fails) at the worst possible moment.",
            "The Misinterpreted Gift: A peace offering is taken as a direct insult.",
            "The Ghost in the Room: Act as if a third person is there when they aren't.",
        ];

        // --- 2. THE SPIN FUNCTION ---
        function spin() {
            // Hide copy button while spinning
            document.getElementById('copy-btn').style.display = 'none';
            
            const configs = [
                {id:'scen', list:scenarios}, 
                {id:'gen', list:genres}, 
                {id:'char', list:characters}, 
                {id:'wild', list:wildcards}
            ];

            configs.forEach((cfg, i) => {
                let el = document.getElementById(cfg.id);
                el.classList.add('spinning');
                let count = 0;
                
                let timer = setInterval(() => {
                    el.innerText = cfg.list[Math.floor(Math.random() * cfg.list.length)];
                    count++;
                    
                    if (count > 15) {
                        clearInterval(timer);
                        el.classList.remove('spinning');
                        
                        // When the final wheel stops (index 3)
                        if (i === 3) {
                            document.getElementById('copy-btn').style.display = 'inline-block';
                            addToHistory();
                        }
                    }
                }, 70 + (i * 50));
            });
        }

        // --- 3. THE HISTORY FUNCTION ---
        function addToHistory() {
            const list = document.getElementById('history-list');
            const s = document.getElementById('scen').innerText;
            const g = document.getElementById('gen').innerText;
            const c = document.getElementById('char').innerText;
            const w = document.getElementById('wild').innerText;

            if (list.innerHTML.includes("No spins recorded yet")) {
                list.innerHTML = "";
            }

            const item = document.createElement('div');
            item.className = 'history-item';
            
            // Extract text before the colon for a cleaner list
            const shortGen = g.split(':')[0];
            const shortChar = c.split(':')[0];
            const shortWild = w.split(':')[0];

            item.innerHTML = `<span class="history-tag">PROMPT:</span> ${shortGen} | ${s} | ${shortChar} | ${shortWild}`;
            list.insertBefore(item, list.firstChild);
        }

        // --- 4. THE COPY FUNCTION ---
        async function copyToClipboard() {
            const text = `WRITING PROMPT\n------------------\nSCENARIO: ${document.getElementById('scen').innerText}\nGENRE: ${document.getElementById('gen').innerText}\nCHARACTER: ${document.getElementById('char').innerText}\nWILDCARD: ${document.getElementById('wild').innerText}`;

            try {
                await navigator.clipboard.writeText(text);
                const btn = document.getElementById('copy-btn');
                const originalText = btn.innerText;
                btn.innerText = "COPIED!";
                btn.style.background = "#2ed573";
                
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.style.background = "#2f3542";
                }, 1500);
            } catch (err) {
                console.error('Failed to copy: ', err);
                alert("Could not copy. Please try manually!");
            }
        }
    </script>
</body>
</html>
